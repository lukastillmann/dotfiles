#/bin/bash

#####################
# One Line Installs #
#####################

## copy these line to install all relevant dependencies

# linux
sudo apt-get update && sudo apt-get upgrade && sudo apt install build-essential cmake python3-dev apache2 keychain default-jre

# vim/tmux
git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim && vim +PluginInstall +qall && git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/scripts/install_plugins.sh && python3 ~/.vim/bundle/YouCompleteMe/install.sh

# node/npm
curl -sL https://deb.nodesource.com/setup_10.x | sudo bash - && sudo apt install nodejs && sudo npm install -g prettier gulp-cli

# RINGOJS
wget -P ~/tmp/ https://ringojs.org/releases/1.2.1/ringojs_1.2.1_all.deb && sudo apt install ~/tmp/ringojs_1.2.1_all.deb && sudo mkdir /usr/share/ringojs/bin && sudo ringo-admin install http://packages.ringojs.org/download/rp/latest

# git configs
sudo git config --global user.email "home@lukastillmann.eu" && sudo git config --global user.name "Lukas Tillmann" && sudo git config --global core.editor "vim"

##################
# Linux packages #
##################

# install updates
echo "updating and upgrading packages"
sudo apt-get update && sudo apt-get upgrade

# install often needed dependencies
sudo apt-get install build-essential cmake python3-dev

# install apache
echo "installing apache server"
sudo apt-get install apache2

# install keychain to manage ssh-agent keys
# see https://www.funtoo.org/Keychain
# add "eval `keychain --eval --agents ssh id_rsa`" to .bash_profile
sudo apt-get install keychain

##############
# VIM / TMUX #
##############

# install vundle
git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

# YouCompleteMe Vim Plugin
# - compile (after installing with vundle)
cd ~/.vim/bundle/YouCompleteMe
python3 install.py

# install tmux
sudo apt-get install tmux
# install tpm
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
echo "Press prefix + I (capital i, as in Install) to fetch the plugins."

# help: install tpm plugins via command line
~/.tmux/plugins/tpm/scripts/install_plugins.sh

##############
# NODE / NPM #
##############

# install nodejs
echo "installing nodejs 10.x"
curl -sL https://deb.nodesource.com/setup_10.x | sudo bash -
sudo apt install nodejs

# install prettier, gulp
sudo npm install -g prettier gulp-cli

########
# JAVA #
########

# install openjdk from apt
sudo apt install default-jre

# install java manually from oracle.com
# download newest java se jdk .tar.gz file
sudo mkdir /usr/local/java
# copy tar file to this folder
sudo tar xzvf jdk-12_linux-x64_bin.tar.gz
# Setup the location of java, javac and javaws
sudo update-alternatives --install "/usr/bin/java" "java" "/usr/local/java/jdk-12.0.{x}/bin/java" 1
# check version
# java --version

###########
# RINGOJS #
###########

# download and install RINGOJS
wget -P ~/tmp/ https://ringojs.org/releases/1.2.1/ringojs_1.2.1_all.deb
sudo apt install ~/tmp/ringojs_1.2.1_all.deb

# install rp package manager
sudo mkdir /usr/share/ringojs/bin
sudo ringo-admin install http://packages.ringojs.org/download/rp/latest

##############
# GIT CONFIG #
##############

# set up base info:
git config --global user.name "Lukas Tillmann"
git config --global user.email "home@lukastillmann.eu"
git config --global core.editor "vim"
# alias lg
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"
